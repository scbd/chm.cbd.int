<div class="container reporting">

    <h2 ng-show="government">{{governmentName}}</h2>
	<select style="margin-top:-40px" class="pull-right" ng-show="!userGovernment()" ng-model="government" ng-options="c.code as c.name|lstring for c in countries|orderBy:'name|lstring'"></select>
	
	<div ng-show="governmentName">
	<h4 class="heading">
		<span class="text-muted">National Reports, NBSAPs and Other Reports</span>
        <span style="font-size:14px;"><span class="label label-warning pull-right label-spacingl">not published</span>
            <span class="label label-info pull-right label-spacing">published</span></span>
	</h4>
    
	<div class="panel-group" id="accordion1">
        
        
		<!-- 
         //================
         // National Biodiversity Strategies and Action Plans (NBSAPS)
         //================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection(undefined)" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-file"></i> National Biodiversity Strategies and Action Plans (NBSAPS)
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalReport', {reportType:cbdNBSAPs[0], type:'nbsap', government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalStrategicPlans|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalStrategicPlans|filter:isPublic).length}}</span>
				</h4>
			</div>
            
			<div id="collapseOne" class="panel-collapse collapse">
				<div class="panel-body row">
                    
					<div ng-hide="nationalStrategicPlans"> <!-- no records -->
						<p>
                        No National Biodiversity Strategies and Action Plans exists.<br/>
                        <em>Please submit a record.</em>
						</p>
						<button type="button" class="btn btn-default btn-xs btn-add" ng-click="edit('nationalReport', {reportType:cbdNBSAPs[0], type:'nbsap', government : government})">add +</button>
					</div>
                    
					<div class="col-lg-4 col-md-4 col-sm-6" ng-repeat="strategicPlan in nationalStrategicPlans"> <!-- NBSAPs -->
						<div class="boxed">

							<h4>
								<i class="glyphicon glyphicon-file"></i> 
								{{strategicPlan.title}} ({{strategicPlan.year}})
							</h4>
							<p>
                            {{strategicPlan.summary|lstring|truncate:160:'...'}} <a ng-show="strategicPlan.url" ng-href="{{strategicPlan.url}}">more &raquo;</a>
							</p>
						    <span ng-show="isDraft(strategicPlan)"  class="label label-warning pull-right label-spacing">not published</span>
				            <span ng-show="isPublic(strategicPlan)" class="label label-info pull-right label-spacing">published</span>
							<button type="button" class="btn btn-default btn-mini btn-xs btn-edit" ng-click="edit('nationalReport', {uid:strategicPlan.identifier})">edit &raquo;</button>
						</div>	
					</div>
				</div>
			</div>
		</div>
        
        
		<!-- 
         //================
         // National Reports
         //================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseTwo')" data-toggle="collapse" data-parent="#accordion1" href="#collapseTwo" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-file"></i> National Reports 
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalReport', {type:'nr', government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalReports|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalReports|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseTwo" class="panel-collapse collapse">
      			<div class="panel-body row">
                    
					<div class="col-lg-4 col-md-4 col-sm-6" ng-repeat="nrType in cbdNationalReports" style="padding-bottom:10px">
						<div class="boxed">
							<h4>
								<i class="glyphicon glyphicon-file"></i>
								{{(nationalReportTypes | filter:{ identifier : nrType })[0].title | lstring}}
								<span ng-hide="filteredReports.length" class="label label-important">missing</span>
							</h4>
							
							<div ng-hide="filteredReports.length"> <!-- no report -->
								<p><em>Please submit the report.</em></p>
								<button type="button" class="btn btn-info btn-xs btn-add" ng-click="edit('nationalReport', {reportType:nrType, government : government})">add +</button>
							</div>
                            
							<div ng-repeat="nationalReport in filteredReports = (nationalReports | filter:{ reportType : nrType })"> <!-- NR -->
								<h5>{{nationalReport.title|lstring}}</h5>
								<p>
                                {{nationalReport.summary|lstring|truncate:160:'...'}} <a ng-show="nationalReport.url" ng-href="{{nationalReport.url}}">more &raquo;</a>
								</p>
					            <span ng-show="isPublic(nationalReport)" class="label label-info pull-right label-spacing">published</span>
							    <span ng-show="isDraft(nationalReport)"  class="label label-warning pull-right label-spacing">not published</span>
								<button type="button" class="btn btn-default btn-xs btn-edit" ng-click="edit('nationalReport', {uid:nationalReport.identifier})">edit &raquo;</button>
							</div>
						</div>
					</div>
                    
				</div>
			</div>
		</div>
        
		<!-- 
         //================
         // Other Reports
         //================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseThree')" data-toggle="collapse" data-parent="#accordion1" href="#collapseThree" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-file"></i> Other Reports 
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalReport', {type:'other', government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(otherNationalReports|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(otherNationalReports|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseThree" class="panel-collapse collapse">
				<div class="panel-body row">
                    
					<div ng-hide="otherNationalReports"> <!-- no records -->
						<p>
                        No other report exists.<br/>
                        <em>Please submit the report.</em>
						</p>
						<button type="button" class="btn btn-info btn-xs btn-add" ng-click="edit('nationalReport', {type:'other', government : government})">add +</button>
					</div>
                    
					<div class="col-lg-4 col-md-4 col-sm-4" ng-repeat="otherReport in otherNationalReports | orderBy:'year':true"> <!-- other reports -->
						<div class="boxed">
							<h4>
								<i class="glyphicon glyphicon-file"></i>
								{{otherReport.reportTypeEx.en}}
							</h4>
							<h5>{{otherReport.title}}</h5>
							<p>
                            {{otherReport.summary|lstring|truncate:160:'...'}} <a ng-show="otherReport.url" ng-href="{{otherReport.url}}">more &raquo;</a>
							</p>
				            <span ng-show="isPublic(otherReport)" class="label label-info pull-right label-spacing">published</span>
						    <span ng-show="isDraft(otherReport)"  class="label label-warning pull-right label-spacing">not published</span>
							<button type="button" class="btn btn-default btn-xs btn-edit" ng-click="edit('nationalReport', {uid:otherReport.identifier})">edit &raquo;</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
    
    
	<!-- 
     //================================================
     // Progress towards implementation of the targets
     //================================================
	 -->
    
    
	<h4 class="heading" style="padding-top:60px;">
		<span class="text-muted"><strong> Progress towards implementation of national and Aichi Biodiversity Targets</strong></span>
        <span style="font-size:14px;">
            <span class="label label-warning pull-right label-spacing">not published</span>
            <span class="label label-info pull-right label-spacing">published</span>
            <span class="label label-success pull-right label-spacing">up-to-date</span>
         </span>
	</h4>
    
	<div class="panel-group" id="accordion2">
        
		<!-- 
         //================
         // Aichi Biodiversity Targets
         //================
		 -->
        
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseFour')" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-plus-sign"></i>   Aichi Biodiversity Targets <i class="icon-chevron-right icon-white"></i>
					<span class="label label-success pull-right label-spacing" ng-cloak>{{ UpToDate(aichiTargets).length}} / {{aichiTargets.length}}</span>
				</h4>
			</div>
			<div id="collapseFour" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th style="white-space:nowrap" ng-click="sortTable('number')">Aichi Target<i ng-show="sortTerm=='number'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
							<th>Related National Targets</th>
							<th style="text-align:center" ng-click="sortTable('isUpToDate')">Assessment of Aichi Target<i ng-show="sortTerm=='number'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
							<th ng-repeat="year in globalYears" ng-class="{ muted : currentYear<year }">{{year}}</th>
						</tr>
						<tr ng-repeat="aichiTarget in aichiTargets| orderBy:number">
							<!-- aichi target icon -->
							<td style="width:42px;text-align:center">
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}"><img class="aichi-icon" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
							</td>
                            
							<!-- Related National Target -->
							<td>
								<ul class="list-unstyled">
									<li style="padding-bottom:5px;" ng-repeat="target in aichiTarget.nationalTargets">
							            <span ng-show="isPublic(target)" class="label label-info pull-right label-spacing">published</span>
										<span ng-show="isDraft(target)"  class="label label-warning pull-right label-spacing">not published</span>
										<i class="glyphicon glyphicon-record"></i>
										<a ng-href="{{target.url}}">{{target.title}}</a>
									</li>
								</ul>
								<button type="button" class="btn btn-default btn-xs btn-link" data-toggle="modal" href="#linkNationalTargetDialog" ng-click="linkTargets({ aichiTarget:aichiTarget, excludeTargets: aichiTarget.nationalTargets })" title="Link this Aichi Target to a National Target">link +</button>

							</td>
                            
							<!-- Assessment status -->
							<td style="text-align:center" ng-class="{false:'not-up-to-date'}[aichiTarget.isUpToDate]">
                                <span class="label label-success" ng-show="aichiTarget.isUpToDate"  style="padding:5px;">up-to-date</span>
                                <span ng-show="!aichiTarget.assessmentYears.length || !aichiTarget.isUpToDate"  style="padding:5px;"><small>not up-to-date</small></span>


								<!--<span class="label label-success"   ng-show="aichiTarget.isUpToDate">up-to-date</span>
								<span class="label label-warning"   ng-show="aichiTarget.assessmentYears.length && !aichiTarget.isUpToDate">not up-to-date</span>
								<span class="label label-default"   ng-hide="aichiTarget.assessmentYears">missing</span>-->
                                
								<div ng-show="aichiTarget.nextAssessmentYear" style="margin-top:3px">
									<button type="button" class="btn btn-info btn-xs btn-add" ng-click="edit('progressAssessment', {aichiTarget : aichiTarget.identifier, year : aichiTarget.nextAssessmentYear, government : government })" title="Add a new assessment">add +</button>								
								</div>
							</td>
                            
							<!-- Years -->
							<td ng-repeat="year in globalYears" style="text-align:center" style="text-align:center" ng-class="{false:'not-up-to-date'}[aichiTarget.isUpToDate]">
								
                                <span ng-show="aichiTarget.assessmentYears.indexOf(year)>=0">
									<a style="cursor:pointer" ng-href="{{getAssessment(aichiTarget, year).url}}"><span class="badge badge-lightgreen " ng-class="{'badge-darkgreen':year==currentYear, 'badge-draft' : isDraft(getAssessment(aichiTarget, year)), 'badge-published' : isPublic(getAssessment(aichiTarget, year)) }"><i class="glyphicon glyphicon-ok"></i></span></a>
								</span>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
        
        
		<!-- 
         //================
         // National Targets
         //================
		 -->
        
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseFive')" data-toggle="collapse" data-parent="#accordion2" href="#collapseFive" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-record"></i> National Targets <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalTarget', { government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalTargets|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalTargets|filter:isPublic).length}}</span>
					<span class="label label-success pull-right label-spacing" ng-cloak>{{ UpToDate(nationalTargets).length}} / {{nationalTargets.length}}</span>
				</h4>
			</div>
			<div id="collapseFive" class="panel-collapse collapse">
      			<div class="panel-body">

    <table class="table table-striped">
        <tr>
            <th></th>
            <th style="width:500px" ng-click="sortTable('title')">National Target <i ng-show="sortTerm=='title'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
            <th style="width:50px"  ng-click="sortTable('aichiTargets')">Aichi Targets <i ng-show="sortTerm=='aichiTargets'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
            <th style="width:250px" ng-click="sortTable('nationalIndicators')">Related Indicators <i ng-show="sortTerm=='nationalIndicators'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
            <th style="width:250px" >Related Activities </th>
            <th style="width:100px;white-space:nowrap;" ng-click="sortTable('isUpToDate')">Assessments <i ng-show="sortTerm=='isUpToDate'" ng-class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
        </tr>
        <tbody ng-repeat="target in nationalTargets | orderBy:sortTerm:orderList">
            <tr >
                <td><button type="button" class="btn btn-default btn-xs pull-right btn-edit" ng-click="edit('nationalTarget', { uid:target.identifier })">edit &raquo;</button></td>
                <td > 
						<i class="glyphicon glyphicon-record"></i> <a ng-href="{{target.url}}">{{target.title|lstring}}</a>
						<div>
	                		<span ng-show="isPublic(target)" class="label label-info label-spacing">published</span>
							<span ng-show="isDraft(target)"  class="label label-warning label-spacing">not published</span>
						</div>
                </td>
                <td><span class="aichi-icons">
                    <a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in target.aichiTargets|orderBy:'identifier'">
                        <img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png" /></a>
                </span></td>
                <td>
                    <div ng-repeat="indicator in target.nationalIndicators">
                		<span ng-show="isPublic(indicator)" class="label label-info pull-right label-spacing" title="published">p</span>
						<span ng-show="isDraft(indicator)"  class="label label-warning pull-right label-spacing" title="not published">np</span>
                        <i class="glyphicon glyphicon-dashboard"></i> <a ng-href="{{indicator.url}}">{{indicator.title}}</a><span ng-show="!$last">;                                                                                            
                        </span>
                    </div>
                </td>
                <td>
                    <div ng-repeat=" activity in getActivities(implementationActivities, target.identifier) ">
                		<span ng-show="isPublic(activity)" class="label label-info pull-right label-spacing" title="published">p</span>
						<span ng-show="isDraft(activity)"  class="label label-warning pull-right label-spacing" title="not published">np</span>
                        <i class="glyphicon glyphicon-cog"></i> <a ng-href="{{activity.url}}">{{activity.title}}</a>
                     </div>
                </td>
                <td  ng-class="{false:'not-up-to-date'}[target.isUpToDate]" style="text-align:center;">

					<div ng-show="!target.isUpToDate" style="padding:5px;"><small>not up-to-date</small></div>
	
                    <div ng-repeat="year in target.assessmentYears "  >
                        <a ng-href="{{getAssessment(target, year).url}}"><span class="label badge-lightgreen " ng-class="{'badge-darkgreen':year==currentYear, 'badge-draft' : isDraft(getAssessment(target, year)), 'badge-published' : isPublic(getAssessment(target, year)) }"> {{year}}</span></a>
                    </div>
                    <button style="margin-top:5px;" type="button" class="btn btn-info btn-xs" ng-click="edit('progressAssessment', {aichiTarget : aichiTarget.identifier, year : target.nextAssessmentYear, government : government })" title="Add a new assessment">
                        add +</button>
                    
                </td>
            </tr>
        </tbody>
    </table>

    
				</div>
			</div>
		</div>

		<!-- 
		//================
		// National Indicators
		//================
		 -->

		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseSix')" data-toggle="collapse" data-parent="#accordion2" href="#collapseSix" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-dashboard"></i> National Indicators <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalIndicator', {government:government})">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalIndicators|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalIndicators|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseSix" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th></th>
                            <th style="text-align:left;white-space:nowrap" ng-click="sortTable('title')">Indicator(s)<i ng-show="sortTerm=='title'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
							<th style="white-space:nowrap;">Related National Targets</th>
							<th>Related Aichi Targets</th>
						</tr>
						<tr ng-repeat="indicator in nationalIndicators| orderBy:sortTerm:orderList">
                            <td>
								<button type="button" class="btn btn-default btn-xs pull-right btn-edit" ng-click="edit('nationalIndicator', { uid:indicator.identifier})">edit &raquo;</button>
							</td>
							<td>
								<i class="glyphicon glyphicon-dashboard"></i> <a ng-href="{{indicator.url}}">{{indicator.title|lstring}}</a>
								<div>
			                		<span ng-show="isPublic(indicator)" class="label label-info label-spacing">published</span>
									<span ng-show="isDraft(indicator)"  class="label label-warning label-spacing">not published</span>
								</div>
							</td>
							
							<td>
								<ul class="list-unstyled">
									<li ng-repeat="target in indicator.nationalTargets">
				                		<span ng-show="isPublic(target)" class="label label-info pull-right label-spacing" title="published">p</span>
										<span ng-show="isDraft(target)"  class="label label-warning pull-right label-spacing" title="not published">np</span>
										<i class="glyphicon glyphicon-record"></i>  <a ng-href="{{target.url}}">{{target.title}}</a>
									</li>
								</ul>
								<button type="button" class="btn btn-default btn-xs btn-link" data-toggle="modal" href="#linkNationalTargetDialog" ng-click="linkTargets({ nationalIndicator:indicator, excludeTargets: indicator.nationalTargets })" title="Link this National Indicator to a National Target">link +</button>
							</td>
							<td>
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in indicator.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png" /></a>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>

	</div>

	<!-- 
     //================================================
     // Activities, Guidance and Support Tools
     //================================================
	 -->
    <h4 class="heading" style="padding-top:60px;">
		<span class="text-muted"><strong> Activities, Guidance and Support Tools</strong></span>
        <span style="font-size:14px;">
            <span class="label label-warning pull-right label-spacing">not published</span>
            <span class="label label-info pull-right label-spacing">published</span>

         </span>
	</h4>
    
	<div class="panel-group" id="accordion3">


		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseSeven')" data-toggle="collapse" data-parent="#accordion3" href="#collapseSeven" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-cog"></i> Implementation Activities <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('implementationActivity', {government:government})">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(implementationActivities|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(implementationActivities|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseSeven" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th></th>
                            <th ng-click="sortTable('completion.en')" >Status <i ng-show="sortTerm=='completion.en'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
							<th width="60%" ng-click="sortTable('title')">Implementation Activity <i ng-show="sortTerm=='title'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>

							<th>Aichi Targets</th>
							<th>National Targets</th>
						</tr>
						<tr ng-repeat="activity in implementationActivities | orderBy:sortTerm:orderList">
							<td>
								<button type="button" class="btn btn-default btn-xs btn-edit" ng-click="edit('implementationActivity', { uid:activity.identifier})">edit &raquo;</button>
							</td>

                              <td><!-- planned / on-going / complete -->
								<!--<span class="label" ng-class="{'label-default':activity.completion.symbol=='2F4C5373-ECD5-4883-BC06-2E8B7F17DC5E', 'label-warning':activity.completion.symbol=='AD9696E5-52E9-49BB-A635-1DB06C89A757', 'label-primary':activity.completion.symbol=='E6640AB5-975D-479F-92C0-FC6E3AC0ADFF'}">-->
									<strong>{{activity.completion.en}}
								</strong></td>

							<td>

					            <span ng-show="isPublic(activity)" class="label label-info pull-right label-spacing">published</span>
							    <span ng-show="isDraft(activity)"  class="label label-warning pull-right label-spacing">not published</span>

								<span style="font-size:16px;"><i class="glyphicon glyphicon-cog"></i> {{activity.title|lstring}}</span>
								<p>
									{{activity.description|lstring|truncate:240:'...'}} <a ng-show="isPublic(activity)" ng-href="{{activity.url}}">more &raquo;</a>
                                </p>
                                
								
							</td>
                          
							<td>
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in activity.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
							</td>
							<td>
								<ul  style="padding-left:0 ;list-style-type: none;">
									<li ng-repeat="target in activity.nationalTargets|orderBy:'identifier'">
										<i class="glyphicon glyphicon-record"></i> <a ng-href="{{target.url}}">{{target.title|lstring}}</a>
										<span ng-show="isDraft(target)"  class="label label-warning label-spacing" title="not published">n-p</span>
							            <span ng-show="isPublic(target)" class="label label-info label-spacing" title="published">p</span>
									</li>
									<p>
									<em ng-show="activity.nationalIndicators">Indicator(s): 
										<i class="glyphicon glyphicon-dashboard"></i>  <span ng-repeat="indicator in activity.nationalIndicators"><a ng-href="{{indicator.url}}">{{indicator.title}}</a><span ng-show="!$last">;</span> </span>
									</em>
									</p>

								</ul>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>

	<!-- 
     //================================================
     // Guidance and Support Tools
     //================================================
	 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection(collapseEight)" data-toggle="collapse" data-parent="#accordion3" href="#collapseEight" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					<i class="glyphicon glyphicon-screenshot"></i> Guidance and Support Tools
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right btn-add" ng-click="edit('nationalSupportTool', { government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalSupportTools|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalSupportTools|filter:isPublic).length}}</span>
				</h4>
			</div>
            
			<div id="collapseEight" class="panel-collapse collapse">
				<div class="panel-body row">
                    
					<div ng-hide="nationalSupportTools"> <!-- no records -->
						<p>
                        No Guidance or Support Tool exists.<br/>
                        <em>Please submit a record.</em>
						</p>
						<button type="button" class="btn btn-info btn-xs" ng-click="edit('nationalSupportTool', { government : government})">add +</button>
					</div>

                   <!-- 
					<div class="col-lg-4 col-md-4 col-sm-6" ng-repeat="tool in nationalSupportTools"> 
						<div class="boxed">
							<h4>
								<i class="glyphicon glyphicon-screenshot"></i>
								{{tool.title}}
							</h4>
							<p>
                            {{tool.description|lstring|truncate:160:'...'}} <a ng-href="{{tool.url}}">more &raquo;</a>
							</p>
							<button type="button" class="btn btn-default btn-mini btn-xs" ng-click="edit('nationalSupportTool', {uid:tool.identifier})">edit &raquo;</button>
						</div>	
					</div>  -->


					<table class="table table-striped">
						<tr>
							<th></th>
							<th width="60%" ng-click="sortTable('title')" >Guidance and Support Tools <i ng-show="sortTerm=='title'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></th>
							<th>Aichi Targets</th>
							<th>National Targets</th>
						</tr>
						<tr ng-repeat="tool in nationalSupportTools | orderBy:sortTerm:orderList">
							<td>
								<button type="button" class="btn btn-default btn-xs btn-edit" ng-click="edit('nationalSupportTool', { uid:tool.identifier})">edit &raquo;</button>
							</td>
							<td>

					            <span ng-show="isPublic(tool)" class="label label-info pull-right label-spacing">published</span>
							    <span ng-show="isDraft(tool)"  class="label label-warning pull-right label-spacing">not published</span>

								<span style="font-size:16px;"><i class="glyphicon glyphicon-screenshot"></i> {{tool.title|lstring}}</span>
								<p>
									{{tool.description|lstring|truncate:240:'...'}} <a ng-show="isPublic(tool)" ng-href="{{tool.url}}">more &raquo;</a>
                                </p>
							</td>
							<td>
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in tool.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
							</td>
							<td>
								<ul  style="padding-left:0 ;list-style-type: none;">
									<li ng-repeat="target in tool.nationalTargets|orderBy:'identifier'">
										<i class="glyphicon glyphicon-record"></i> <a ng-href="{{target.url}}">{{target.title|lstring}}</a>
									    <span ng-show="isDraft(target)"  class="label label-warning label-spacing" title="not published">n-p</span>
							            <span ng-show="isPublic(target)" class="label label-info label-spacing" title="published">p</span>
									</li>
								
								</ul>
							</td>
						</tr>
					</table>


				</div>
			</div>
		</div>
        
	</div>



<div>
    <div id="linkNationalTargetDialog" class="modal fade">
        <div class="modal-dialog">
		    <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Select a target to be linked to:</h4>
                    <div ng-show="linkTargetData.aichiTarget">
                        <a target="_blank" ng-href="{{aichiTarget.url}}" title="{{linkTargetData.aichiTarget.title|lstring}}"><img class="aichi-icon" ng-src="/app/images/targets/{{linkTargetData.aichiTarget.number}}.png"/></a>
                        {{linkTargetData.aichiTarget.title}}</div>
                    <div ng-show="linkTargetData.nationalIndicator">Indicator: {{linkTargetData.nationalIndicator.title}}</div>
                </div>
                <div class="modal-body" style="max-height:500px;overflow-y:auto">
                    
                    <table class="table">
                        <tr>
                            <th>National Target</th>
                            <th>Related Aichi Target</th>
                            <th></th>
                        </tr>
                        <tr ng-repeat="target in linkTargetData.targets | orderBy:'title'">
                            <td>
                                {{target.title}}
                            </td>
                            <td>
                                <a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in target.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
                            </td>
                            <td style="text-align:right">
                                <button class="btn btn-primary" ng-click="edit('nationalTarget', { uid:target.identifier, aichiTarget : linkTargetData.aichiTarget.identifier, nationalIndicator : linkTargetData.nationalIndicator.identifier })">select &raquo;</button>
                            </td>
                        </tr>
                    </table>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-info" ng-click="edit('nationalTarget', { government:government, aichiTarget : linkTargetData.aichiTarget.identifier, nationalIndicator : linkTargetData.nationalIndicator.identifier })">Create a new target +</button>
                </div>
		    </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->		
	</div>
</div>
<style type="text/css">
    .reporting a { color: #5e7600; }
    .label-spacing {
        margin-right: 5px;
    }
    
    .aichi-icon {
        width: 46px;
    }
    
    .aichi-icons {
        width: 48px;
    }
    
    .aichi-icon-xs {
        width: 21px;
    }
    
    .badge-success {
        background-color:#5cb85c;
    }
    .badge-success > a,
    .badge-success > a:hover,
    .badge-success {
        color: white;
        text-decoration: none;
    }
    
    .boxed {
        border:1px solid #ddd;
        padding:0 10px 10px 10px;
        border-radius:4px;
    }
    
    .container.reporting  .panel-heading {
        border-color: #bce8f1;
        background-color: #2A5E8C;
    }
    .container.reporting  .panel-heading h4 {
        color:white;
    }
    
    .container.reporting  .panel-heading.collapsed {
        background-color: #f5f5f5;
        border-color: #dddddd;
    }
    .container.reporting  .panel-heading.collapsed h4{
        color:black;
    }
    
    .label {
        padding-top: 0.3em!important;
    }

    .btn-edit{
    	background-color:#d3d3d3;
    }
    .btn-link{
    	background-color:#d9edf7;

    }

    .badge-published {
        background-color:#5bc0de;
        color: #ffffff
    }

    .badge-darkgreen {
        background-color:#5cb85c;
        color: #ffffff
    }

    .badge-draft {
        background-color:#f0ad4e;
        color: #ffffff
	}


  .up-to-date{
    	background-color:#dff0d8!important;
    }

  .not-up-to-date{
    	background-color:#f2dede!important;
    }
    .up-caret {
        border-bottom: 4px solid #000000;
        border-top: 4px solid transparent;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        display: inline-block;
        height: 0;
        opacity: 0.3;
        vertical-align: top;
        width: 0;
        top: -3px;
        position: relative;
    }

    .down-caret {
        border-bottom: 4px solid transparent;
        border-top: 4px solid #000000;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        display: inline-block;
        height: 0;
        opacity: 0.3;
        vertical-align: top;
        width: 0;
    }

	</style>

</div>
