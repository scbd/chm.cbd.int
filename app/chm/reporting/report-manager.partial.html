<div class="container reporting">
	<style type="text/css">
		.reporting a { color: #5e7600; }
		.label-spacing {
			margin-right: 5px;
		}

		.aichi-icon {
			width: 46px;
		}

		.aichi-icons {
			width: 48px;
		}

		.aichi-icon-xs {
			width: 21px;
		}

		.badge-success {
			background-color:#5cb85c;
		}
		.badge-success > a,
		.badge-success > a:hover,
		.badge-success {
			color: white;
			text-decoration: none;
		}

		.boxed {
			border:1px solid #ddd;
			padding:0 10px 10px 10px;
			border-radius:4px;
		}
	</style>

	<select style="margin-top:-40px" class="pull-right" ng-show="!userGovernment()" ng-model="government" ng-options="c.code as c.name|lstring for c in countries|orderBy:'name|lstring'"></select>
	
	<h4 class="heading">
		National Reports, Action Plans and Other Reports
        <span class="label label-warning pull-right label-spacing">not published</span>
		<span class="label label-info pull-right label-spacing">published</span>
	</h4>

	<div class="panel-group" id="accordion1">


		<!-- 
		//================
		// National Biodiversity Strategies and Action Plans (NBSAPS)
		//================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection(undefined)" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					National Biodiversity Strategies and Action Plans (NBSAPS)
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('nationalReport', {reportType:cbdNBSAPs[0], government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalStrategicPlans|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalStrategicPlans|filter:isPublic).length}}</span>
				</h4>
			</div>

			<div id="collapseOne" class="panel-collapse collapse">
				<div class="panel-body row">

					<div ng-hide="nationalStrategicPlans"> <!-- no records -->
						<p>
							No National Biodiversity Strategies and Action Plans exists.<br/>
							<em>Please submit a record.</em>
						</p>
						<button type="button" class="btn btn-info btn-xs" ng-click="edit('nationalReport', {reportType:cbdNBSAPs[0], government : government})">add +</button>
					</div>

					<div class="col-lg-4 col-md-4 col-sm-6" ng-repeat="strategicPlan in nationalStrategicPlans"> <!-- NBSAPs -->
						<div class="boxed">
							<h4>
								<i class=" icon-file"></i> 
								{{strategicPlan.title}} ({{strategicPlan.year}})
							</h4>
							<p>
								{{strategicPlan.summary|lstring|truncate:160:'...'}} <a ng-href="{{strategicPlan.url}}">more &raquo;</a>
							</p>
							<button type="button" class="btn btn-default btn-mini btn-xs" ng-click="edit('nationalReport', {uid:strategicPlan.identifier})">edit &raquo;</button>
						</div>	
					</div>
				</div>
			</div>
		</div>


		<!-- 
		//================
		// National Reports
		//================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseTwo')" data-toggle="collapse" data-parent="#accordion1" href="#collapseTwo" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					National Reports 
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('nationalReport', {type:'nr', government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalReports|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalReports|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseTwo" class="panel-collapse collapse">
      			<div class="panel-body row">

					<div class="col-lg-4 col-md-4 col-sm-6" ng-repeat="nrType in cbdNationalReports" style="padding-bottom:10px">
						<div class="boxed">
							<h4>
								<i class=" icon-file"></i>
								{{(nationalReportTypes | filter:{ identifier : nrType })[0].title | lstring}}
								<span ng-hide="filteredReports.length" class="label label-important">missing</span>
							</h4>
							
							<div ng-hide="filteredReports.length"> <!-- no report -->
								<p><em>Please submit a record.</em></p>
								<button type="button" class="btn btn-info btn-xs" ng-click="edit('nationalReport', {reportType:nrType, government : government})">add +</button>
							</div>

							<div ng-repeat="nationalReport in filteredReports = (nationalReports | filter:{ reportType : nrType })"> <!-- NR -->
								<h5>{{nationalReport.title|lstring}}</h5>
								<p>
									{{nationalReport.summary|lstring|truncate:160:'...'}} <a ng-href="{{nationalReport.url}}">more &raquo;</a>
								</p>
								<button type="button" class="btn btn-default btn-xs" ng-click="edit('nationalReport', {uid:nationalReport.identifier})">edit &raquo;</button>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<!-- 
		//================
		// Other Reports
		//================
		 -->
		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseThree')" data-toggle="collapse" data-parent="#accordion1" href="#collapseThree" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					Other Reports 
					<i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('nationalReport', {government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(otherNationalReports|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(otherNationalReports|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseThree" class="panel-collapse collapse">
				<div class="panel-body row">

					<div ng-hide="otherNationalReports"> <!-- no records -->
						<p>
							No other report exists.<br/>
							<em>Please submit a record.</em>
						</p>
						<button type="button" class="btn btn-info btn-xs" ng-click="edit('nationalReport', {government : government})">add +</button>
					</div>

					<div class="col-lg-4 col-md-4 col-sm-4" ng-repeat="otherReport in otherNationalReports | orderBy:'year':true"> <!-- other reports -->
						<div class="boxed">
							<h4>
								<i class=" icon-file"></i>
								{{otherReport.reportTypeEx.en}}
							</h4>
							<h5>{{otherReport.title}}</h5>
							<p>
								{{otherReport.summary|lstring|truncate:160:'...'}} <a ng-href="{{otherReport.url}}">more &raquo;</a>
							</p>
							<button type="button" class="btn btn-default btn-xs" ng-click="edit('nationalReport', {uid:otherReport.identifier})">edit &raquo;</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!-- 
	//================================================
	// Progress towards implementation of the targets
	//================================================
	 -->


	<h4 class="heading">
		Progress towards implementation of national and Aichi targets
        <span class="label label-warning pull-right label-spacing">not published</span>
		<span class="label label-info pull-right label-spacing">published</span>
		<span class="label label-success pull-right label-spacing">assessed</span>
	</h4>

	<div class="panel-group" id="accordion2">

		<!-- 
		//================
		// Aichi Biodiversity Targets
		//================
		 -->

		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseFour')" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					Aichi Biodiversity Targets <i class="icon-chevron-right icon-white"></i>
					<span class="label label-success pull-right label-spacing" ng-cloak>{{(aichiTargets|filter:isAssessed).length}} / {{aichiTargets.length}}</span>
				</h4>
			</div>
			<div id="collapseFour" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th style="white-space:nowrap">Aichi Target</th>
							<th>Related National Target(s)</th>
							<th style="text-align:center">Assessment(s) of Aichi Target(s)</th>
							<th ng-repeat="year in globalYears" ng-class="{ muted : currentYear<year }">{{year}}</th>
						</tr>
						<tr ng-repeat="aichiTarget in aichiTargets|orderBy:'number'">

							<!-- aichi target icon -->
							<td style="width:42px;text-align:center">
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}"><img class="aichi-icon" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
							</td>

							<!-- Related National Target -->
							<td>
								<ul style="padding-left:0px">
									<li ng-repeat="target in aichiTarget.nationalTargets"><a ng-href="{{target.url}}">{{target.title}}</a></li>
								</ul>
								<button type="button" class="btn btn-default btn-xs">add +</button>
							</td>

							<!-- Assessment status -->
							<td style="text-align:center">
								<span class="label label-success"   ng-show="aichiTarget.isUpToDate">up-to-date</span>
								<span class="label label-warning"   ng-show="aichiTarget.assessmentYears.length && !aichiTarget.isUpToDate">not up-to-date</span>
								<span class="label label-default"   ng-hide="aichiTarget.assessmentYears">missing</span>

								<div ng-show="aichiTarget.nextAssessmentYear" style="margin-top:3px">
									<button type="button" class="btn btn-default btn-xs" ng-click="edit('progressAssessment', {aichiTarget : aichiTarget.identifier, year : aichiTarget.nextAssessmentYear, government : government })" title="Add a new assessment">add +</button>								
								</div>
							</td>

							<!-- Years -->
							<td ng-repeat="year in globalYears" style="text-align:center">
								<span class="badge badge-success" ng-show="aichiTarget.assessmentYears.indexOf(year)>=0">
									<a style="cursor:pointer" ng-href="{{getAssessment(aichiTarget, year).url}}"><i class="icon-ok icon-white"></i></a>
								</span>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>


		<!-- 
		//================
		// National Targets
		//================
		 -->

		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseFive')" data-toggle="collapse" data-parent="#accordion2" href="#collapseFive" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					National Targets <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('nationalTarget', { government:government })">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalTargets|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalTargets|filter:isPublic).length}}</span>
					<span class="label label-success pull-right label-spacing" ng-cloak>{{(nationalTargets|filter:isAssessed).length}} / {{nationalTargets.length}}</span>
				</h4>
			</div>
			<div id="collapseFive" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th class="aichi-icons" >Aichi Targets</th>
							<th>National Targets</th>
							<th>&nbsp;</th>
							<th style="text-align:center">Assessment(s) of National target(s)</th>
							<th ng-repeat="year in globalYears" ng-class="{ muted : currentYear<year }">{{year}}</th>
						</tr>
						<tbody ng-repeat="target in nationalTargets">
							<tr>
								<td class="aichi-icons"  rowspan="2" >
									<a target="_blank" ng-href="{{aichiTarget.url}}" ng-repeat="aichiTarget in target.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
								</td>
								<td >
									<a ng-href="{{target.url}}">{{target.title|lstring}}</a>
								</td>
								<td >
									<button type="button" class="btn btn-default btn-xs pull-right" ng-href="/managementcentre/edit/nationalTarget.shtml?uid={{target.identifier}}">edit &raquo;</button>
								</td>
								<td style="text-align:center">
									<span class="label label-success"   ng-show="target.isUpToDate">up-to-date</span>
									<span class="label label-warning"   ng-show="target.assessmentYears.length && !target.isUpToDate">not up-to-date</span>
									<span class="label label-default"   ng-hide="target.assessmentYears">missing</span>
									
									<div ng-show="target.nextAssessmentYear" style="margin-top:3px">
										<button type="button" class="btn btn-default btn-xs" ng-click="edit('progressAssessment', {aichiTarget : aichiTarget.identifier, year : target.nextAssessmentYear, government : government })" title="Add a new assessment">add +</button>								
									</div>
								</div>

								</td>
								<td ng-repeat="year in globalYears" style="text-align:center">
									<span class="badge badge-success" ng-show="target.assessmentYears.indexOf(year)>=0">
										<a style="cursor:pointer" ng-href="{{getAssessment(target, year).url}}"><i class="icon-ok icon-white"></i></a>
									</span>
								</td>
							</tr>
							<tr>
								<td colspan="14">
									<em ng-show="activity.nationalIndicators">Indicator(s): 
										<span ng-repeat="indicator in target.nationalIndicators"><a ng-href="{{indicator.url}}">{{indicator.title}}</a><span ng-show="!$last">;</span> </span>
									</em>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- 
		//================
		// National Indicators
		//================
		 -->

		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseSix')" data-toggle="collapse" data-parent="#accordion2" href="#collapseSix" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					National Indicators <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('nationalIndicator', {government:government})">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(nationalIndicators|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(nationalIndicators|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseSix" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th style="text-align:left;white-space:nowrap">Indicator(s)</th>
							<th></th>
							<th style="white-space:nowrap;" colspan="2">Related National Targets</th>
							<th>Related Aichi Targets</th>
						</tr>
						<tr ng-repeat="indicator in nationalIndicators|orderBy:'title|lstring'">
							<td>
								<a ng-href="{{indicator.url}}">{{indicator.title|lstring}}</a>
							</td>
							<td>
								<button type="button" class="btn btn-default btn-xs pull-right" ng-click="edit('nationalIndicator', { uid:indicator.identifier})">edit &raquo;</button>
							</td>
							<td>
								<ul>
									<li ng-repeat="target in indicator.nationalTargets"><a ng-href="{{target.url}}">{{target.title}}</a></li>
								</ul>
							</td>
							<td style="width:25px">
								<button type="button" class="btn btn-default btn-xs">add +</button>
							</td>
							<td>
								<a target="_blank" ng-href="{{aichiTarget.url}}" ng-repeat="aichiTarget in indicator.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png" /></a>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>


		<!-- 
		//================
		// Implementation Activities
		//================
		 -->

		<div class="panel panel-default">
			<div class="panel-heading collapsed" ng-click="setLastSection('collapseSeven')" data-toggle="collapse" data-parent="#accordion2" href="#collapseSeven" style="cursor:pointer">
				<h4 class="accordion-toggle panel-title">
					Implementation Activities <i class="icon-chevron-right icon-white"></i>
					<button style="margin-left:20px" class="btn btn-info btn-xs pull-right" ng-click="edit('implementationActivity', {government:government})">add +</button>
					<span class="label label-warning pull-right label-spacing">{{(implementationActivities|filter:isDraft).length}}</span>
					<span class="label label-info pull-right label-spacing">{{(implementationActivities|filter:isPublic).length}}</span>
				</h4>
			</div>
			<div id="collapseSeven" class="panel-collapse collapse">
      			<div class="panel-body">
					<table class="table table-striped">
						<tr>
							<th>Status</th>
							<th>Implementation Activity</th>
							<th colspan="2" width="33%">Related Targets</th>
						</tr>
						<tr ng-repeat="activity in implementationActivities">
							<td>
								<!-- planned / on-going / complete -->
								<span class="label" ng-class="{'label-default':activity.completion.symbol=='2F4C5373-ECD5-4883-BC06-2E8B7F17DC5E', 'label-warning':activity.completion.symbol=='AD9696E5-52E9-49BB-A635-1DB06C89A757', 'label-primary':activity.completion.symbol=='E6640AB5-975D-479F-92C0-FC6E3AC0ADFF'}">
									{{activity.completion.en}}
								</span>
							</td>
							<td>
								<h5>{{activity.title|lstring}}</h5>
								<p>
									{{activity.description|lstring|truncate:240:'...'}} <a ng-href="{{activity.url}}">more &raquo;</a>
                                </p>
								<button type="button" class="btn btn-default btn-xs" ng-click="edit('implementationActivity', { uid:activity.identifier})">edit &raquo;</button>
							</td>
							<td>
								<a target="_blank" ng-href="{{aichiTarget.url}}" title="{{aichiTarget.title|lstring}}" ng-repeat="aichiTarget in activity.aichiTargets|orderBy:'identifier'"><img class="aichi-icon-xs" ng-src="/app/images/targets/{{aichiTarget.number}}.png"/></a>
							</td>
							<td>
								<ul style="padding-left:0px">
									<li ng-repeat="target in activity.nationalTargets|orderBy:'identifier'">
										<a ng-href="{{target.url}}">{{target.title|lstring}}</a>
									</li>
									<p>
									<em ng-show="activity.nationalIndicators">Indicator(s): 
										<span ng-repeat="indicator in activity.nationalIndicators"><a ng-href="{{indicator.url}}">{{indicator.title}}</a><span ng-show="!$last">;</span> </span>
									</em>
									</p>

								</ul>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>
